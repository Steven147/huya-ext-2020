const fs = require('fs-extra');
const crypto = require('crypto');

module.exports = function (absPath) {
  return new Promise(function (resolve, reject) {
    const rs = fs.createReadStream(absPath);
    const hash = crypto.createHash('md5');

    rs.on('data', hash.update.bind(hash));

    rs.on('end', () => {
      resolve(hash.digest('hex'));
    });

    rs.on('error', (err) => {
      reject(err);
    });
  });
}
