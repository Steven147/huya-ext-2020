const fs = require('fs-extra')
const path = require('path')
const { generateHtmlFromBuildConfig } = require('./generateHtmlFromBuildConfig')

async function copyH5Dir({ projectName, projectDir, inputDir, outputDir, config }) {
  await fs.remove(outputDir)

  await fs.copy(inputDir, outputDir)

  const entryPath = path.resolve(inputDir, 'index.html')

  const entryHtmlDict = generateHtmlFromBuildConfig({ projectName, entryPath, outputDir, config, })

  return entryHtmlDict
}

module.exports = {
  copyH5Dir,
}
